{"version":3,"sources":["../../src/tests/question.spec.js"],"names":["expect","chai","use","chaiHttp","describe","it","done","request","app","post","send","title","body","end","err","res","to","have","status","be","an","and","true","a","false","property","patch","data","console","log","votes","not","lessThan"],"mappings":"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","file":"question.spec.js","sourcesContent":["/* eslint-disable no-unused-expressions */\nimport chai from 'chai';\nimport chaiHttp from 'chai-http';\nimport app from '../app';\n\nconst { expect } = chai;\nchai.use(chaiHttp);\n\ndescribe('User can create a new question', () => {\n\tit('should return status 200 with payload of newly created question record', (done) => {\n\t\tchai\n\t\t\t.request(app)\n\t\t\t.post('/api/v1/questions')\n\t\t\t.send({\n\t\t\t\ttitle: 'What are federated clusters?',\n\t\t\t\tbody: 'Multiple Kubernetes clusters can be managed as a single cluster with the help of federated clusters.',\n\t\t\t})\n\t\t\t.end((err, res) => {\n\t\t\t\texpect(res).to.have.status(200);\n\t\t\t\texpect(res.body.status).to.be.an('boolean').and.to.be.true;\n\t\t\t\texpect(res.body).to.be.an('object');\n\t\t\t\tdone();\n\t\t\t});\n\t});\n\n\tit('should return status 400 when fields\\' titles already exist on the collection.', (done) => {\n\t\tchai\n\t\t\t.request(app)\n\t\t\t.post('/api/v1/questions')\n\t\t\t.send({\n\t\t\t\ttitle: 'What is Kubernetes?',\n\t\t\t\tbody: 'Multiple Kubernetes clusters can be managed as a single cluster with the help of federated clusters.',\n\t\t\t})\n\t\t\t.end((err, res) => {\n\t\t\t\texpect(res).to.have.status(400);\n\t\t\t\texpect(res.body.status).to.be.a('boolean').and.to.be.false;\n\t\t\t\texpect(res.body).to.have.property('error').and.to.be.a('string');\n\t\t\t\tdone();\n\t\t\t});\n\t});\n\n\tit('should return status 400 when fields\\' that are required are not available', (done) => {\n\t\tchai\n\t\t\t.request(app)\n\t\t\t.post('/api/v1/questions')\n\t\t\t.send({\n\t\t\t})\n\t\t\t.end((err, res) => {\n\t\t\t\texpect(res).to.have.status(400);\n\t\t\t\texpect(res.body.status).to.be.a('boolean').and.to.be.false;\n\t\t\t\texpect(res.body).to.have.property('error').and.to.be.a('string');\n\t\t\t\tdone();\n\t\t\t});\n\t});\n\n\tit('should return status 400 for fields\\' that don\\'t meet validation rules', (done) => {\n\t\tchai\n\t\t\t.request(app)\n\t\t\t.post('/api/v1/questions')\n\t\t\t.send({\n\t\t\t\ttitle: 'NA',\n\t\t\t\tbody: 'NA',\n\t\t\t})\n\t\t\t.end((err, res) => {\n\t\t\t\texpect(res).to.have.status(400);\n\t\t\t\texpect(res.body.status).to.be.a('boolean').and.to.be.false;\n\t\t\t\texpect(res.body).to.have.property('error').and.to.be.a('string');\n\t\t\t\tdone();\n\t\t\t});\n\t});\n\n\tit('should return status 400 for fields\\' that contain illegal characters', (done) => {\n\t\tchai\n\t\t\t.request(app)\n\t\t\t.post('/api/v1/questions')\n\t\t\t.send({\n\t\t\t\ttitle: 'What###%^^^^',\n\t\t\t\tbody: 'As a typical application would have a cluster of containers running across multiple hosts, all these containers would need to talk to each other.',\n\t\t\t})\n\t\t\t.end((err, res) => {\n\t\t\t\texpect(res).to.have.status(400);\n\t\t\t\texpect(res.body.status).to.be.a('boolean').and.to.be.false;\n\t\t\t\texpect(res.body).to.have.property('error').and.to.be.a('string');\n\t\t\t\tdone();\n\t\t\t});\n\t});\n\n\tit('should return status 400 for fields\\' if required field is empty', (done) => {\n\t\tchai\n\t\t\t.request(app)\n\t\t\t.post('/api/v1/questions')\n\t\t\t.send({\n\t\t\t\ttitle: '',\n\t\t\t\tbody: 'As a typical application would have a cluster of containers running across multiple hosts, all these containers would need to talk to each other.',\n\t\t\t})\n\t\t\t.end((err, res) => {\n\t\t\t\texpect(res).to.have.status(400);\n\t\t\t\texpect(res.body.status).to.be.a('boolean').and.to.be.false;\n\t\t\t\texpect(res.body).to.have.property('error').and.to.be.a('string');\n\t\t\t\tdone();\n\t\t\t});\n\t});\n});\n\ndescribe('User can upvote or downvote a specific question', () => {\n\tit('should return status 200 when User upvotes a question', (done) => {\n\t\tchai\n\t\t\t.request(app)\n\t\t\t.patch('/api/v1/questions/1/upvote')\n\t\t\t.end((err, res) => {\n\t\t\t\texpect(res).to.have.status(200);\n\t\t\t\texpect(res.body.status).to.be.a('boolean').and.to.be.true;\n\t\t\t\texpect(res.body).to.have.property('data').and.to.be.an('object');\n\t\t\t\texpect(res.body.data).to.have.property('votes').and.to.be.a('number');\n\t\t\t\tdone();\n\t\t\t});\n\t});\n\n\tit('should return status 200 when User downvotes a question', (done) => {\n\t\tchai\n\t\t\t.request(app)\n\t\t\t.patch('/api/v1/questions/1/downvote')\n\t\t\t.end((err, res) => {\n\t\t\t\texpect(res).to.have.status(200);\n\t\t\t\texpect(res.body.status).to.be.a('boolean').and.to.be.true;\n\t\t\t\texpect(res.body).to.have.property('data').and.to.be.an('object');\n\t\t\t\texpect(res.body.data).to.have.property('votes').and.to.be.a('number');\n\t\t\t\tdone();\n\t\t\t});\n\t});\n\n\tit('should return status 400 when User downvotes a question that doesn\\'t exist', (done) => {\n\t\tchai\n\t\t\t.request(app)\n\t\t\t.patch('/api/v1/questions/999999999999/downvote')\n\t\t\t.end((err, res) => {\n\t\t\t\tconsole.log(res.status);\n\t\t\t\texpect(res).to.have.status(404);\n\t\t\t\texpect(res.body.status).to.be.a('boolean').and.to.be.false;\n\t\t\t\texpect(res.body).to.have.property('error').and.to.be.an('string');\n\t\t\t\tdone();\n\t\t\t});\n\t});\n\n\tit('should not be able to vote below 0 vote count', (done) => {\n\t\tchai\n\t\t\t.request(app)\n\t\t\t.patch('/api/v1/questions/3/downvote')\n\t\t\t.end((err, res) => {\n\t\t\t\tconsole.log(res.status);\n\t\t\t\texpect(res).to.have.status(200);\n\t\t\t\texpect(res.body).to.have.property('data').and.to.be.an('object');\n\t\t\t\texpect(res.body.data).to.have.property('votes').and.to.be.a('number');\n\t\t\t\texpect(res.body.data.votes).to.not.be.lessThan(0);\n\t\t\t\tdone();\n\t\t\t});\n\t});\n});\n"]}